import modules ;
import package ;

path-constant URDL_ROOT : . ;

BOOST_ROOT = [ modules.peek : BOOST_ROOT ] ;
if $(BOOST_ROOT)
{
  use-project /boost : $(BOOST_ROOT) ;
}

project : build-dir build/bin ;

local patterns = *.hpp *.ipp ;

local dirs = include/urdl include/urdl/* ;

package.install install-headers
    : <install-source-root>include
    : : : [ glob $(dirs)/$(patterns) ]
    ;

local install-targets  = install-headers ;

for local var in debug release
{
  for local lnk in static shared
  {
    install lib-$(var)-$(lnk)
        : build
        : <location>lib
          <install-type>LIB
          <variant>$(var)
          <link>$(lnk)
        ;

    package.install install-$(var)-$(lnk)
        : <variant>$(var)
          <link>$(lnk)
        : : build :
        ;

    install-targets += install-$(var)-$(lnk) ;
  }
}

alias install : $(install-targets) ;

explicit install ;
